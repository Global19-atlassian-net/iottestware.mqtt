/*******************************************************************************
 * Copyright (c) 2018 Relayr GmbH
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html 
 *
 * Contributors:
 *   Alexander Kaiser
 *    Sascha Hackel
 *******************************************************************************/
module MQTT_Broker_Templates {

import from MQTT_Templates all;
import from MQTT_v3_1_1_Types all;
import from IPL4asp_Types all;

template MQTT_v3_1_1_Message tw_connect_valid_mqtt_311 := 
{
  msg :=
  {
    connect_msg := 
    {
      header := tw_connectHeader,
      nameLength := 4,
      name := "MQTT",
      protocol_level := 4,
      flags := ?,
      keep_alive := ?,
      payload := ?
    }
  }
}

template MQTT_v3_1_1_Message tw_connect_protocol_name := 
{
  msg :=
  {
    connect_msg := 
    {
      header := ?,
      nameLength := 4,
      name := "MQTT",
      protocol_level := ?,
      flags := ?,
      keep_alive := ?,
      payload := ?
    }
  }
}

template MQTT_v3_1_1_Message tw_connect_protocol_level := 
{
  msg :=
  {
    connect_msg := 
    {
      header := ?,
      nameLength := ?,
      name := ?,
      protocol_level := 4,
      flags := ?,
      keep_alive := ?,
      payload := ?
    }
  }
}

template MQTT_v3_1_1_Message tw_connect :=
{
  msg :=
  {
    connect_msg := ?
  }
}


template MQTT_v3_1_1_Message t_puback(integer p_packetId) :=
{
  msg :=
  {
    puback := 
    {
      header := t_pubackHeader,
      packet_identifier := p_packetId
    }
  }
}
}

/*******************************************************************************
 * Copyright (c) 2018 Relayr GmbH
 * All rights reserved. This program and the accompanying materials
 * are made available under the terms of the Eclipse Public License v1.0
 * which accompanies this distribution, and is available at
 * http://www.eclipse.org/legal/epl-v10.html
 *
 * Contributors:
 *   Alexander Kaiser
 *   Sascha Hackel
 *   Axel Rennoch
 *******************************************************************************/
module MQTT_TestSystem_Common
{

//import from IPL4asp_Types all;
import from IPL4asp_PortType all;

import from MQTTasp_Types all;
import from MQTTasp_PortType all;

import from MQTT_TypesAndValues all;  // MQTT_Client_TypesAndValues
import from MQTT_Broker_TypesAndValues all;
import from MQTT_Broker_Pixits all;

group common_components {

  /*
  * Basic MTC (Main Test Component)
  */
  type component MQTT_MTC
  {
    port MQTTasp_PT MQTT_PCO;
  }
}

group broker_components {
  /*
  * MQTT Broker Test Component contains capabilities and context of a MQTT Broker
  */
  type component MQTT_Broker_MTC extends MQTT_MTC
  {
    // timer locally available for MQTT_Broker_PTC; value retrieved from .cfg (PIXIT)
    timer tc_testcase_max := PX_MAX_TC_TIMER;
    var default vc_timeout_default;

    var MQTT_BrokerContext ctx;
    var MQTT_ConnectionList vl_connections;
  }
}

group client_components {
  type component MQTT_Client_TestSystem
  {
    port MQTTasp_PT MQTT_Publisher;
    port MQTTasp_PT MQTT_Subscriber;
  }

  /*
   * MQTT Client Test Component contains capabilities and context of a MQTT Client
   */
  type component MQTT_Client_MTC extends MQTT_MTC
  {
    //timer tc_testcase_max := 5.0;
    //var default vc_timeout_default;

    var MqttClientContext ctx;
    var MqttClientCredentials credentials;
  }
}

} // module
